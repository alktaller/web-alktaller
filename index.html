<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>AlkTaller</title>
  <link rel="icon" href="images/icono.png">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div id="login-screen" class="hidden">
  <div class="login-container">
    <img src="images/logo.png" alt="AlkTaller Logo" class="login-logo">
    <h2>Bienvenido a AlkTaller</h2>
    <p>Para gestionar tus datos de forma segura sin servidores, necesitamos un Token de GitHub.</p>
    
    <div class="input-group-vertical">
      <a href="https://github.com/settings/tokens/new?scopes=repo&description=AlkTaller%20Web%20App" target="_blank" class="btn-secondary btn-full">
        ğŸ”‘ Generar Token AutomÃ¡ticamente
      </a>
      <p class="tiny-text">(Te abrirÃ¡ GitHub. Baja al final, pulsa "Generate token" y pÃ©galo abajo)</p>
    </div>

    <div class="input-group-vertical" style="text-align: left; margin-bottom: 1rem;">
       <label for="repoUser" style="font-size: 0.85rem; font-weight: bold;">Usuario / OrganizaciÃ³n</label>
       <input type="text" id="repoUser" placeholder="Ej: alktaller">
       
       <label for="repoName" style="font-size: 0.85rem; font-weight: bold; margin-top: 0.5rem;">Repositorio</label>
       <input type="text" id="repoName" placeholder="Ej: web-alktaller">
    </div>

    <div class="input-group">
      <input type="password" id="githubTokenInput" placeholder="Pega aquÃ­ tu token (ghp_...)">
      <button onclick="handleLogin()" class="btn-primary">Entrar</button>
    </div>
  </div>
</div>

<div id="app-container" class="hidden">
  <header>
    <div class="logo-area">
      <img src="images/logo.png" alt="AlkTaller" class="app-logo">
      <h1>AlkTaller</h1>
    </div>
    <div class="user-area">
      <button onclick="logout()" class="btn-secondary">ğŸšª Salir</button>
    </div>
  </header>

  <main>
    <div class="dashboard-controls">
      <select id="vehicleSelect"></select>
      <div class="action-buttons">
        <button onclick="addVehicle()" class="btn-primary">â• AÃ±adir coche</button>
        <button onclick="saveData(data)" class="btn-success">ğŸ’¾ Guardar cambios</button>
      </div>
    </div>

    <section class="card">
      <h2>ğŸ“Š EstadÃ­sticas</h2>
      <div id="stats"></div>
    </section>

    <div class="forms-grid">
      <section class="card">
        <h2>â›½ Nuevo repostaje</h2>
        <div class="form-group">
          <input id="fuelDate" type="date">
          <input id="fuelOdo" type="number" placeholder="KilÃ³metros">
          <input id="fuelLiters" type="number" placeholder="Litros">
          <input id="fuelCost" type="number" placeholder="Coste total (â‚¬)">
          <button onclick="addFuel()" class="btn-primary">Guardar repostaje</button>
        </div>
      </section>

      <section class="card">
        <h2>ğŸ”§ Nuevo mantenimiento</h2>
        <div class="form-group">
          <input id="maintDate" type="date">
          <input id="maintType" placeholder="Tipo (aceite, frenos...)">
          <input id="maintOdo" type="number" placeholder="KilÃ³metros">
          <input id="maintCost" type="number" placeholder="Coste (â‚¬)">
          <button onclick="addMaintenance()" class="btn-primary">Guardar mantenimiento</button>
        </div>
      </section>
    </div>

    <section class="card">
      <h2>â° Recordatorios</h2>
      <div class="table-responsive">
        <table id="reminderTable">
          <thead>
            <tr>
              <th>TÃ­tulo</th>
              <th>Frecuencia (km)</th>
              <th>Frecuencia (dÃ­as)</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <button onclick="addReminder()" class="btn-secondary mt-2">â• AÃ±adir recordatorio</button>
    </section>

    <section class="card">
      <h2>ğŸ“‹ Historial</h2>
      <ul id="timeline"></ul>
    </section>
  </main>
</div>

<script src="js/storage.js"></script>
<script src="js/app.js"></script>

</body>
</html>
